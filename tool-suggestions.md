# Tool Enhancement Suggestions for jay-agent

## Current Tool Inventory

**File Operations (10)**: create_file, read_file, write_file, copy_path, rename_path, delete_path, rename_all, rename_semantic, list_dir, list_tree

**Search (4)**: search_text, search_index, web_search, code_search

**Execution (8)**: run_python, run_ssh, run_shell, run_powershell, python_exec, run_tests, run_lint, run_type_check

**Package Management (3)**: pip_install, npm_install, install_package

**Docker (5)**: docker_ps, docker_images, docker_logs, docker_stop, docker_compose

**Git (3)**: git_status, git_diff, git_log

**Network (1)**: ping_host

**Total: 34 tools**

---

## Recommended New Tools

### 1. Advanced File Editing

#### `edit_file` (HIGH PRIORITY)
- **Purpose**: Precise string-replacement editing (like Claude Code's Edit tool)
- **Why**: Current approach requires rewriting entire files; this allows surgical edits
- **Parameters**: `path`, `old_string`, `new_string`, `replace_all=false`
- **Example**: Change a single function without touching the rest of the file
- **Benefit**: Reduces token usage, prevents accidental overwrites

#### `apply_patch`
- **Purpose**: Apply git-style unified diffs to files
- **Why**: Enables multi-file refactoring with precise change tracking
- **Parameters**: `patch_content`, `reverse=false`
- **Example**: Apply a diff generated by the LLM or from git
- **Benefit**: Industry-standard format for changes

#### `glob_files`
- **Purpose**: Find files matching glob patterns
- **Why**: Current search_text searches content; this finds by filename
- **Parameters**: `pattern` (e.g., "**/*.py", "src/**/*.js")
- **Example**: "Find all Python test files"
- **Benefit**: Fast file discovery without regex

---

### 2. HTTP/API Tools

#### `http_request` (HIGH PRIORITY)
- **Purpose**: Make HTTP GET/POST/PUT/DELETE requests
- **Why**: Test APIs, fetch data, webhook integration
- **Parameters**: `url`, `method`, `headers={}`, `body=None`, `timeout=30`
- **Example**: Test REST API endpoints, fetch JSON data
- **Benefit**: Essential for web development and API testing
- **Safety**: Timeout limits, size limits, allowlist optional

#### `curl_command`
- **Purpose**: Execute curl with full options
- **Why**: Complex HTTP requests with authentication, cookies, etc.
- **Parameters**: `curl_args`, `timeout=30`
- **Example**: API testing with OAuth, multipart uploads
- **Benefit**: Full curl power for advanced use cases

---

### 3. Enhanced Git Operations

#### `git_add`
- **Purpose**: Stage files for commit
- **Parameters**: `paths=[]`, `all=false`
- **Example**: "Stage these 3 modified files"

#### `git_commit`
- **Purpose**: Create a commit with message
- **Parameters**: `message`, `amend=false`
- **Example**: "Commit changes with descriptive message"

#### `git_push`
- **Purpose**: Push to remote
- **Parameters**: `remote="origin"`, `branch=None`, `force=false`
- **Example**: "Push to origin/main"

#### `git_branch`
- **Purpose**: List, create, or switch branches
- **Parameters**: `action` (list/create/switch), `name=None`
- **Example**: "Create feature branch"

#### `git_stash`
- **Purpose**: Stash/unstash changes
- **Parameters**: `action` (save/pop/list), `message=None`
- **Example**: "Save work in progress"

**Why these**: Complete the git workflow; current tools are read-only

---

### 4. System & Environment

#### `read_env` (HIGH PRIORITY)
- **Purpose**: Read environment variables
- **Parameters**: `var_name=None` (None = list all non-sensitive)
- **Example**: "Check if PYTHONPATH is set"
- **Benefit**: Debug environment issues
- **Safety**: Filter out sensitive vars (AWS_SECRET, etc.)

#### `system_info`
- **Purpose**: Get OS, CPU, memory, disk info
- **Parameters**: `detail_level="basic"` (basic/full)
- **Example**: "Check available disk space"
- **Benefit**: System diagnostics, compatibility checks

#### `which_command`
- **Purpose**: Find executable location (like `which`/`where`)
- **Parameters**: `command`
- **Example**: "Check if node is installed and where"

---

### 5. Interactive & User Input

#### `ask_user` (MEDIUM PRIORITY)
- **Purpose**: Prompt user for input during execution
- **Parameters**: `question`, `options=[]`, `allow_custom=true`
- **Example**: "Which database to use? [postgres/mysql/sqlite]"
- **Benefit**: Interactive workflows, user decisions
- **Implementation**: Like Claude Code's AskUserQuestion

#### `confirm_action`
- **Purpose**: Yes/no confirmation for dangerous operations
- **Parameters**: `message`, `default=false`
- **Example**: "Delete 50 files? [y/N]"

---

### 6. Code Analysis

#### `find_symbol`
- **Purpose**: Find function/class/variable definitions
- **Parameters**: `symbol_name`, `type=None` (function/class/variable), `glob=None`
- **Example**: "Find the `process_data` function"
- **Benefit**: Semantic code navigation
- **Implementation**: Parse AST or use ctags/grep

#### `find_references`
- **Purpose**: Find all usages of a symbol
- **Parameters**: `symbol_name`, `glob=None`
- **Example**: "Where is `database_url` used?"

#### `extract_function`
- **Purpose**: Extract code into a new function
- **Parameters**: `file_path`, `start_line`, `end_line`, `new_function_name`
- **Example**: Refactoring helper
- **Benefit**: Automated refactoring

---

### 7. Testing & Quality

#### `generate_tests`
- **Purpose**: Generate test cases for a function
- **Parameters**: `function_name`, `file_path`, `framework="pytest"`
- **Example**: "Generate tests for calculate_total()"
- **Implementation**: LLM-assisted, creates test file
- **Benefit**: Accelerate TDD

#### `coverage_report`
- **Purpose**: Run test coverage analysis
- **Parameters**: `test_cmd="pytest --cov"`, `min_coverage=80`
- **Example**: "Check if coverage is above 80%"

---

### 8. Database Tools

#### `db_query` (MEDIUM PRIORITY)
- **Purpose**: Execute SQL queries (read-only by default)
- **Parameters**: `connection_string`, `query`, `allow_write=false`
- **Example**: "SELECT * FROM users LIMIT 10"
- **Safety**: Read-only mode, query validation, timeout
- **Benefit**: Database inspection, debugging

#### `db_schema`
- **Purpose**: Inspect database schema
- **Parameters**: `connection_string`, `table=None`
- **Example**: "Show schema for users table"

---

### 9. Process & Background Tasks

#### `run_background`
- **Purpose**: Run command in background, return process ID
- **Parameters**: `command`, `log_file=None`
- **Example**: "Start dev server in background"
- **Benefit**: Long-running processes

#### `check_process`
- **Purpose**: Check if background process is still running
- **Parameters**: `pid`

#### `kill_process`
- **Purpose**: Kill a process by PID
- **Parameters**: `pid`, `force=false`

**Why**: Handle long-running tasks (servers, builds, monitoring)

---

### 10. Multi-line Script Execution

#### `run_bash_script` (ALREADY EXISTS!)
- **Status**: I see this is mentioned in LLMDocumentation.md but may not be in chat.py
- **Purpose**: Execute multi-line bash scripts
- **Parameters**: `script`, `timeout=60`, `cwd=None`, `env={}`
- **Example**: Complex setup scripts, multi-step operations
- **Benefit**: More than one-liners without multiple calls

---

### 11. Virtual Environment & Project Setup

#### `create_venv`
- **Purpose**: Create Python virtual environment
- **Parameters**: `path="venv"`, `python_version=None`
- **Example**: "Set up isolated Python environment"

#### `activate_venv`
- **Purpose**: Activate venv for subsequent pip_install
- **Parameters**: `path="venv"`

#### `requirements_install`
- **Purpose**: Install from requirements.txt
- **Parameters**: `requirements_file="requirements.txt"`

---

### 12. Image & Binary File Support

#### `read_image`
- **Purpose**: Read and describe images (if LLM supports vision)
- **Parameters**: `path`
- **Example**: "Describe this screenshot"
- **Benefit**: Multimodal debugging

#### `read_pdf`
- **Purpose**: Extract text from PDF
- **Parameters**: `path`, `pages=None`
- **Example**: "Read documentation PDF"

---

### 13. Clipboard & Temporary Files

#### `clipboard_copy`
- **Purpose**: Copy text to system clipboard
- **Parameters**: `text`
- **Example**: "Copy API key to clipboard"

#### `clipboard_paste`
- **Purpose**: Read from clipboard
- **Example**: "Use clipboard content as input"

#### `create_temp_file`
- **Purpose**: Create temporary file, return path
- **Parameters**: `content`, `suffix=None`
- **Example**: Quick test data generation

---

## Priority Ranking

### Tier 1 (Implement First)
1. **edit_file** - Essential for efficient code editing
2. **http_request** - Critical for web development/testing
3. **read_env** - Common debugging need
4. **git_add/commit/push** - Complete git workflow
5. **ask_user** - Interactive workflows

### Tier 2 (High Value)
6. **apply_patch** - Advanced editing
7. **glob_files** - File discovery
8. **find_symbol** - Code navigation
9. **db_query** - Database work
10. **run_background** - Long-running tasks

### Tier 3 (Nice to Have)
11. **system_info** - Diagnostics
12. **generate_tests** - Quality automation
13. **find_references** - Refactoring
14. **read_image/pdf** - Multimodal support
15. **clipboard operations** - UX convenience

---

## Comparison with Modern AI Coding Assistants

### Claude Code Has
- ✅ Edit (string replacement)
- ✅ Glob (pattern matching)
- ✅ Grep (advanced search)
- ✅ WebFetch (HTTP with AI processing)
- ✅ Task (sub-agents)
- ✅ TodoWrite (task tracking)
- ✅ AskUserQuestion (interactive input)
- ✅ Bash with background processes
- ✅ NotebookEdit (Jupyter)

### GitHub Copilot / Codex 2 Has
- Apply edits to multiple files
- Symbol-based code navigation
- Semantic search (AST-aware)
- Auto-generate tests
- Refactoring operations
- Database tools

### Gemini Code Assist Has
- Multi-file diffs
- Code explanation tools
- Environment inspection
- API testing built-in
- Documentation generation

### jay-agent's Unique Strengths
- ✅ SSH remote execution (unique!)
- ✅ Sandboxed Python execution with requirements
- ✅ Semantic file renaming
- ✅ RAG vector search
- ✅ Web search with fetch+summarize
- ✅ Docker integration
- ✅ PowerShell support

---

## Implementation Notes

### For edit_file
```python
def edit_file(path, old_string, new_string, replace_all=False):
    """
    Replace exact string match in file.
    If replace_all=False, error if not unique.
    """
    content = read_file(path)
    if not replace_all and content.count(old_string) > 1:
        return f"Error: found {content.count(old_string)} matches, not unique"
    if old_string not in content:
        return "Error: old_string not found"
    new_content = content.replace(old_string, new_string, 1 if not replace_all else -1)
    write_file(path, new_content)
    return f"Replaced {1 if not replace_all else content.count(old_string)} occurrence(s)"
```

### For http_request
```python
def http_request(url, method="GET", headers=None, body=None, timeout=30):
    """
    Make HTTP request with safety limits.
    """
    import requests
    try:
        response = requests.request(
            method=method,
            url=url,
            headers=headers or {},
            data=body,
            timeout=timeout,
            allow_redirects=True
        )
        return f"Status: {response.status_code}\nHeaders: {dict(response.headers)}\nBody:\n{response.text[:10000]}"
    except Exception as e:
        return f"Request failed: {e}"
```

### Safety Considerations

**For http_request**:
- Max response size (10KB default, configurable)
- Timeout enforcement
- Optional URL allowlist
- No file download by default

**For db_query**:
- Read-only by default (SELECT only)
- Connection string validation
- Query timeout
- No DROP/DELETE unless explicitly allowed

**For git_push**:
- Confirmation prompt for force push
- Branch protection awareness
- Remote verification

---

## Next Steps

1. Add **edit_file** first - highest impact, low complexity
2. Add **http_request** - essential for web work
3. Add **git_add/commit/push** - complete existing git tools
4. Add **ask_user** - enables interactive workflows
5. Consider **glob_files**, **read_env**, **find_symbol** for Tier 2

Would dramatically improve jay-agent's capabilities while maintaining safety and staying aligned with Claude Code, Copilot, and Gemini patterns.
